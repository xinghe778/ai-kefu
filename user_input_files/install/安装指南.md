# YiZi AI 系统安装指南

## 系统要求
- PHP >= 7.4
- MySQL >= 5.7 或 MariaDB >= 10.2
- Apache/Nginx Web服务器
- PHP扩展：PDO, curl, mbstring, fileinfo

## 快速安装

### 1. 数据库初始化
```bash
# 登录MySQL
mysql -u root -p

# 执行初始化脚本
source /path/to/install/database_init.sql
```

### 2. 配置数据库连接
编辑 `admin/config.php` 文件，修改数据库连接信息：
```php
<?php
define('DB_HOST', 'localhost');
define('DB_NAME', 'api');
define('DB_USER', 'your_username');  // 替换为您的数据库用户名
define('DB_PASS', 'your_password');  // 替换为您的数据库密码
```

### 3. 设置文件权限
```bash
# 确保Web服务器有读写权限
chmod 755 /path/to/uploads/
chmod 755 /path/to/admin/
```

### 4. 配置Web服务器
确保Web服务器指向项目根目录，并启用URL重写（如果需要）。

## 初始配置

### 1. 登录后台管理
- 访问：`http://yourdomain.com/admin/`
- 默认用户名：`admin`
- 默认密码：`admin123`
- **重要**：登录后立即修改默认密码！

### 2. 配置API设置
在后台管理 -> 系统设置中配置：
- API密钥：您的AI服务API密钥
- API地址：AI服务的地址（默认：https://api.spanstar.cn）
- Prompt设置：系统提示词

### 3. 创建用户账户
可以通过后台管理 -> 用户管理 添加新用户，或者让用户自己注册。

## 功能说明

### 聊天功能
- 支持多种AI模型
- 知识库检索增强
- 文件上传分析
- 聊天历史保存

### 知识库管理
- 分类管理
- 文档上传
- 全文检索
- 内容编辑

### 用户管理
- 角色权限控制
- 用户状态管理
- 登录日志记录

## 安全注意事项

1. **修改默认密码**：立即修改admin账户的默认密码
2. **API密钥安全**：不要在公共场合暴露API密钥
3. **文件上传限制**：系统默认限制文件大小和类型
4. **定期备份**：定期备份数据库和上传文件
5. **访问日志**：定期检查聊天日志和访问记录

## 常见问题

### Q: 数据库连接失败
A: 检查 `admin/config.php` 中的数据库配置是否正确

### Q: 无法上传文件
A: 检查 `uploads/` 目录权限是否设置为755

### Q: API调用失败
A: 检查API密钥和API地址配置，以及网络连接

### Q: 知识库搜索无结果
A: 确保知识库条目已正确创建并包含搜索内容

## 更新说明

### 从v2.0升级到v3.0
1. 备份现有数据库
2. 执行数据库升级脚本（如有提供）
3. 替换代码文件
4. 更新配置文件
5. 清除缓存

## 技术支持

如遇问题，请检查：
1. PHP错误日志
2. Web服务器错误日志
3. 数据库错误日志
4. 系统配置文件

---

**版本**: v3.0  
**更新日期**: 2025-11-23  
**开发者**: YiZi AI Team