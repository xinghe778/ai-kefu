# 个人资料功能测试指南

## 快速测试步骤

### 1. 访问个人资料页面

**方式一：通过管理面板访问**
- 登录管理后台（用户名：`admin`，密码：`admin123`）
- 点击右上角用户名下拉菜单
- 选择"个人资料"

**方式二：通过前端界面访问**
- 登录系统后访问聊天界面（`index_v2.php`）
- 点击右上角的用户名区域
- 在下拉菜单中选择"个人资料"

**方式三：直接访问**
- 直接访问：`http://您的域名/admin/profile.php`

### 2. 功能测试清单

#### ✅ 页面加载测试
- [ ] 页面正常加载，无错误提示
- [ ] 显示用户头像（用户名首字母）
- [ ] 显示用户名和角色标识
- [ ] 显示注册日期和统计数据

#### ✅ 个人信息修改测试
- [ ] 邮箱字段可编辑
- [ ] 输入无效邮箱格式时显示错误提示
- [ ] 保存邮箱修改后显示成功消息
- [ ] 页面刷新后邮箱修改生效

#### ✅ 密码修改测试
- [ ] 输入错误当前密码时显示错误提示
- [ ] 新密码少于6位时显示错误提示
- [ ] 新密码和确认密码不匹配时显示错误提示
- [ ] 使用正确密码成功修改后显示成功消息
- [ ] 使用新密码可以正常登录

#### ✅ 界面响应性测试
- [ ] 在移动设备上界面正常显示
- [ ] 桌面端界面布局正常
- [ ] 主题切换（亮色/暗色）正常

### 3. 安全测试

#### ✅ 权限测试
- [ ] 未登录用户访问时自动跳转到登录页面
- [ ] 普通用户只能查看和修改自己的资料
- [ ] 管理员可以访问所有功能

#### ✅ 数据验证测试
- [ ] 输入特殊字符不会导致错误
- [ ] SQL注入测试（尝试输入特殊SQL字符）
- [ ] XSS测试（尝试输入HTML/JavaScript代码）

### 4. 常见问题排查

#### 问题1：页面显示空白或500错误
**可能原因：**
- PHP语法错误
- 数据库连接失败
- 权限不足

**解决方案：**
```bash
# 检查PHP错误日志
tail -f /var/log/apache2/error.log

# 检查文件权限
chmod 644 /path/to/admin/profile.php
chown www-data:www-data /path/to/admin/profile.php
```

#### 问题2：数据库错误
**可能原因：**
- 用户表缺少某些字段
- 数据库连接参数错误

**解决方案：**
```sql
-- 检查用户表结构
DESCRIBE users;

-- 确保必要字段存在
ALTER TABLE users ADD COLUMN email VARCHAR(100) DEFAULT NULL;
```

#### 问题3：样式显示异常
**可能原因：**
- CSS文件未正确加载
- 浏览器缓存问题

**解决方案：**
- 强制刷新页面（Ctrl+F5）
- 清除浏览器缓存
- 检查网络连接

### 5. 性能测试

#### 页面加载速度
- 首次加载：< 2秒
- 页面切换：< 1秒
- 表单提交：< 3秒

#### 并发测试
- 多用户同时访问正常
- 大量数据查询时响应正常

### 6. 移动端测试

#### iOS Safari测试
- [ ] 页面正常显示
- [ ] 菜单交互正常
- [ ] 表单输入正常

#### Android Chrome测试
- [ ] 页面正常显示
- [ ] 触摸交互正常
- [ ] 键盘弹出正常

### 7. 错误消息测试

#### 验证各种错误提示
```php
// 测试场景和预期结果
1. 空邮箱提交 → "邮箱格式不正确"
2. 错误当前密码 → "当前密码错误"
3. 密码不匹配 → "新密码和确认密码不一致"
4. 密码过短 → "新密码长度至少6位"
5. 成功修改 → "资料更新成功！"
```

## 测试通过标准

### 必需功能（必须全部通过）
- [ ] 页面可以正常访问和加载
- [ ] 用户信息可以正常显示
- [ ] 邮箱修改功能正常工作
- [ ] 密码修改功能正常工作
- [ ] 安全验证正常工作

### 推荐功能（建议通过）
- [ ] 移动端界面正常
- [ ] 主题切换正常
- [ ] 错误提示友好
- [ ] 页面加载速度快

### 高级功能（可选）
- [ ] 统计数据准确
- [ ] 并发访问稳定
- [ ] 无控制台错误
- [ ] SEO友好

## 测试报告模板

**测试环境：**
- 服务器：_______________
- PHP版本：_______________
- 浏览器：_______________
- 测试日期：_______________

**测试结果：**
- 基础功能：✅ 通过 / ❌ 失败
- 安全功能：✅ 通过 / ❌ 失败
- 界面显示：✅ 通过 / ❌ 失败
- 移动端：✅ 通过 / ❌ 失败

**发现的问题：**
1. 问题描述：________________
   解决方案：________________

2. 问题描述：________________
   解决方案：________________

**测试结论：**
- [ ] 功能正常，可以投入使用
- [ ] 有小问题，需要修复后使用
- [ ] 有严重问题，需要立即修复

---

**测试完成后，请确认所有功能正常工作。如有问题，请参考故障排除指南或联系技术支持。**